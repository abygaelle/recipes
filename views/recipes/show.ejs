<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/show.css" />
<%- include('../partials/nav') %>

<main>
  <h1><%= recipe.name %></h1>
  <h2>By: <%= recipe.owner.name %></h2>
<section>
  <div class="show-list">
      <p>Recipe name: <%= recipe.name %></p>
      <p>Total time: <%= recipe.totalTime %></p>
      <p>Ingredients: <%= recipe.ingredients %></p>
      <p>Directions: <%= recipe.directions %></p>
    </div>
</section>
<% if(recipe.owner.equals(user?.profile._id)){ %>
  <a href="/recipes/<%= recipe._id%>/edit">Edit</a>
<% } %>
<% if (user?.profile._id) { %>
  <form 
    action="/recipes/<%= recipe._id %>/reviews" method="POST">
    <label for="content-textarea">Review:</label>
    <textarea name="content" id="textarea"></textarea>
    <label for="rating-select">Rating:</label>
    <select name="rating" id="rating-select">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5" selected>5</option>
    </select>
    <button type="submit">Add Review</button>
  </form>
  <% } %>
  <% recipe.reviews.forEach(review => { %>
    <ul>
      <li><%= review.rating %>
      <%= review.content %></li>
    </ul>
    <% }) %>
    
</main>
<%- include('../partials/footer') %>